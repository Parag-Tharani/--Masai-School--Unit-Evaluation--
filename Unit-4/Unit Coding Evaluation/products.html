<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-comm</title>

    <style>

    </style>
</head>
<body>
    <div>
        <h1>Products</h1>
        <a href="./cart.html">Go to cart</a>
    </div>
    <h3>Sorting</h3>
    <label>Sort by Price</label>
    <select id="sortPrice">
        <option>Relevent</option>
        <option value="lowtohigh">Low to High</option>
        <option value="hightolow">High to Low</option>
    </select>
    <label>Sort by Rating</label>
    <select id="sortRating">
        <option>None</option>
        <option value="lowtohigh">Low to High</option>
        <option value="hightolow">High to Low</option>
    </select>
    <div id="container">

    </div>
</body>
<script>
     const data = [
    {
      name: "SAMSUNG Galaxy F12",
      rating: 4,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/kn22m4w0/mobile/a/q/8/galaxy-f12-sm-f127gzgiins-samsung-original-imagftmjw3xqg4yk.jpeg?q=70",
      price: 11499,
    },
    {
      name: "SAMSUNG Galaxy F42",
      rating: 4.2,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/ku4ezrk0/mobile/v/5/e/galaxy-f42-5g-sm-e426bzahins-samsung-original-imag7anfwxsgumgz.jpeg?q=70",
      price: 12199,
    },
    {
      name: "Apple Iphone 12",
      rating: 4.6,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/kg8avm80/mobile/r/h/z/apple-iphone-12-dummyapplefsn-original-imafwg8dqgncgbcb.jpeg?q=70",
      price: 59999,
    },
    {
      name: "APPLE iPhone 12 Mini",
      rating: 4.5,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/kg8avm80/mobile/d/g/b/apple-iphone-12-mini-dummyapplefsn-original-imafwgbfhfevaajh.jpeg?q=70",
      price: 49999,
    },
    {
      name: "OPPO A12",
      rating: 3.8,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/kb1470w0/mobile/q/g/g/oppo-a12-cph2083-original-imafsh2hfkyamqyt.jpeg?q=70",
      price: 9490,
    },
    {
      name: "ASUS ROG Phone 3",
      rating: 4.9,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/kcuug7k0/mobile/g/h/e/asus-rog-phone-3-zs661ks-6a006in-original-imaftwc6nmyuyekd.jpeg?q=70",
      price: 46999,
    },
    {
      name: "DIZO Star 300",
      rating: 3.4,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/kqpj4i80/mobile/e/i/r/star-300-dh2001-dizo-original-imag4nmpv7zahzs2.jpeg?q=70",
      price: 1299,
    },
    {
      name: "Micromax IN Note 1 ",
      rating: 4.4,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/ku5ufm80/mobile/v/t/1/in-note-1-e7746-micromax-original-imag7cdgz6tqychm.jpeg?q=70",
      price: 10999,
    },
    {
      name: "SAMSUNG Galaxy Z Fold3 5G",
      rating: 4,
      image_url:
        "https://rukminim1.flixcart.com/image/312/312/ksqeky80/mobile/x/7/1/galaxy-z-fold3-5g-sm-f926bzgdinu-samsung-original-imag68q6hpdwmngw.jpeg?q=70",
      price: 149999,
    },
  ];
 

  var sortType = document.querySelector("#sortPrice").addEventListener("change",function(){
      var sort1 = document.querySelector("#sortPrice").value
      data.sort(function(a,b){
          if(sort1 == "lowtohigh"){
              return a.price - b.price
          }else if(sort1 == "hightolow"){
              return b.price - a.price
          }else{
              window.location.reload()
          }
      });
      displayData(data);
  });

  var sortType = document.querySelector("#sortRating").addEventListener("change",function(){
      var sort2 = document.querySelector("#sortRating").value
      data.sort(function(a,b){
          if(sort2 == "lowtohigh"){
              return a.rating - b.rating
          }else if(sort2 == "hightolow"){
              return b.rating - a.rating
          }else{
            window.location.reload()
          }
      });
      displayData(data);
  });

  var cartData;
  if(localStorage.getItem("productData") === null){
      cartData= [];
  }else{
      cartData = localStorage.getItem("productData")
  }

    function displayData(data){
    document.querySelector("#container").innerHTML = "";

        data.forEach(Data => {
            
            var box = document.createElement("div")

            var name = document.createElement("h3")
            name.innerText = Data.name

            var img = document.createElement("img")
            img.src = Data.image_url

            var rating = document.createElement("p")
            rating.innerText = Data.rating

            var price = document.createElement("p")
            price.innerText = Data.price

            var button = document.createElement("button")
            button.innerText = "Add to cart"

            button.addEventListener("click",function(){
                addtocart(Data)
            })

            box.append(img,name,price,rating,button)

            document.querySelector("#container").append(box)
        });

            function addtocart(data){
            cartData.push(data);
            localStorage.setItem("productData",JSON.stringify(cartData))
            }
    }
    displayData(data);
</script>
</html>